<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
    <!--styles-->
    <link rel="stylesheet" type="text/css" href="/css/blue.css" />
    <link href="/css/style.css" rel="stylesheet" />

    <!--scripts-->
    <script src="/js/libs/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="/js/libs/dx/dx.all.js"></script>

    <script type="text/javascript" src="/js/libs/jspdf/jspdf.umd.min.js"></script>
    <script type="text/javascript" src="/js/libs/jspdf/jspdf.plugin.autotable.min.js"></script>
    <script src="/js/libs/polyfill/polyfill.min.js"></script>
    <script src="/js/libs/exceljs/exceljs.min.js"></script>
    <script src="/js/libs/file-saver/FileSaver.min.js"></script>
    <script src="/js/init-topbar.js"></script>

    <!-- Loading Sidebar Topbar and footer -->
    <script>
        $(document).ready(function() {
            $('#sidebar').load("/views/layout/sidebar.html");
            $('#topbar').load('/views/layout/topbar.html', async function() {
                await setUserNameInTopbar();
            });
            $('#footer').load("/views/layout/footer.html");
        });
    </script>

    <script>
        window.jQuery || document.write(decodeURIComponent('%3Cscript src="js/jquery.min.js"%3E%3C/script%3E'))
    </script>

    <script>
        $(async() => {
            //Set some components to read only according to the profile
            async function getUserAccessLevel(sso) {
                    let accessLevel;
                    await fetch(`${localStorage.getItem('backEndIP')}/getAccessLevel/${sso}`, {
                            // mode: 'no-cors' // 'cors' by default
                            method: 'GET',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                        })
                        .then(response => response.json())
                        .then(result => { accessLevel = result });
                   
                    return accessLevel;
                }
            const usersso = localStorage.getItem('CURRENT_USER_SSO');
            const userAccessLevel = await getUserAccessLevel(usersso);
            console.log("Access Level ", userAccessLevel);
            
             //Set some components to read only according to the profile
            /* if ( userAccessLevel != "IB"){
                window.location.href = '/views/com-cso-list/com-cso-list.html';
            } */
    }) 
    </script>

    <script src="/js/init-topbar.js"></script>
    <script src="/Database/data.js"></script>
    <script src="/views/my-analysis/my-analysis.js"></script>
</head>

<body id="page-top">
    <!-- Page Wrapper -->
    <div id="wrapper">
        <!-- Sidebar -->
        <div id="sidebar" class="d-flex"></div>
        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">
            <!-- Main Content -->
            <div id="content">
                <!-- Topbar -->
                <div id="topbar"></div>
                <!-- Begin Page Content -->
                <div class="container-fluid">
                  
                </div>
            </div>
            <footer id="footer"></footer>
            <!-- /.container-fluid -->
        </div>
        <!-- End of Main Content -->
        <!-- Footer -->

    </div>
    <!-- End of Content Wrapper -->
    <!-- End of Page Wrapper -->
</body>

</html>